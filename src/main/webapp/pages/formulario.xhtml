<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"	
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Bienvenido</title>
	<script>
		function openDialogVT(element) {
			//Open Dialogo ventana Transformado
		    var val = $(element).find('option:selected').text();
		    if(val == 'Si') {
		    	PF('CTDialog').show();
		    	func();		    			    	
		    }
		    	
	}
	</script>
</h:head>
<h:body>	
	<h:form id="crearPlantilla">
		<p:accordionPanel	id="acordeon"	activeIndex="0"	widgetVar="acordeonCrearPlantilla" >
			<p:ajax event="tabChange"	listener="#{cpMB.ontTabChange}" update="@widgetVar(comboItems),@widgetVar(tableTemplate)"/>
			<p:tab	id="tab1" title="Configuración de las etiquetas Header, Detail y Footer">
				<div	id="configurationPrevious">
					<!--Header, Details y Footer  -->
					<br />
					<p:panel 	id="menu1" 
								header="Configuración de las Etiquetas"
								widgetVar="menu1">
						<h:panelGrid columns="3" cellspacing="20">
							<h:column>
								<h:selectBooleanCheckbox
									value="#{cpMB.form1.checkboxs[0].marcado}"
									disabled="#{cpMB.form1.checkboxs[0].deshabilitado}">
									<p:ajax update="@widgetVar(menu1)"
											listener="#{cpMB.form1.actionEventCheckBoxHeader()}" />
								</h:selectBooleanCheckbox>
								<h:outputLabel value="Header" />
								<br />
								<h:selectBooleanCheckbox
									value="#{cpMB.form1.checkboxs[1].marcado}"
									disabled="#{cpMB.form1.checkboxs[1].deshabilitado}">
									<p:ajax update="@widgetVar(menu1)"
											listener="#{cpMB.form1.actionEventCheckBoxDetail()}" />
								</h:selectBooleanCheckbox>
								<h:outputLabel	value="Details" />
								<br />
								<h:selectBooleanCheckbox
									value="#{cpMB.form1.checkboxs[2].marcado}"
									disabled="#{cpMB.form1.checkboxs[2].deshabilitado}">
									<p:ajax update="@widgetVar(menu1)"
											listener="#{cpMB.form1.actionEventCheckBoxFooter()}" />
								</h:selectBooleanCheckbox>
								<h:outputLabel value="Footer" />
							</h:column>
							<h:column>
								<p:spinner	placeholder="Cantidad de grupos: "
											value="#{cpMB.form1.spinners[0].cantidad}"
											disabled="#{cpMB.form1.spinners[0].deshabilitado}" min="1"
											max="4">									
									<p:ajax event="valueChange"	update="@widgetVar(menu1)"	
											listener="#{cpMB.form1.actionEventSpinnerHeader()}"/>
								</p:spinner>
								<br />
								<h:inputText rendered="false" />
								<br />
								<p:spinner 	id="spinfoot" 
											placeholder="Cantidad de grupos: "
											value="#{cpMB.form1.spinners[1].cantidad}"
											disabled="#{cpMB.form1.spinners[1].deshabilitado}" 
											min="1" max="#{cpMB.form1.spinners[0].cantidad}">
									<p:ajax update="@widgetVar(menu1)"/>
								</p:spinner>
							</h:column>
						</h:panelGrid>
						<p:commandButton 	value="Ingresar Sentencia SQL"
											disabled="#{cpMB.form1.buttonSiguiente}"
											onclick="PF('dialogSQL').show();" />
					</p:panel>
				</div>
			</p:tab>
			<p:tab	id="tab2" title="Configuración personalizada de ítems">
				<div id="configurationTableMetadatos">
					<p:panel id="panelmenu2"
							header="Configuración de ítems de la query"
							visible="#{cpMB.form2.render}" 
							widgetVar="panelmenu2">
						<h:panelGrid	columns="3" 
										cellspacing="20">
							<h:column>
								<p:selectOneMenu value="#{cpMB.form2.combos[0].itemSel}"	widgetVar="comboItems">
									<f:selectItem itemLabel="Seleccione Item" itemValue="" />
									<f:selectItems value="#{cpMB.form2.combos[0].items}" />
									<p:ajax event="change"
										listener="#{cpMB.reconocedorComboGrupal()}"
										update="comboCampos" />
								</p:selectOneMenu>
							</h:column>
							<h:column>
								<p:selectOneMenu id="comboCampos"
									disabled="#{cpMB.form2.combos[1].deshabilitado}"
									value="#{cpMB.form2.combos[1].itemSel}">
									<f:selectItem itemLabel="Campos" itemValue="" />
									<f:selectItems value="#{cpMB.form2.combos[1].items}" />
									<p:ajax event="change" listener="#{cpMB.reconocedorSubCombo()}"
										update="@widgetVar(tableTemplate),
												@widgetVar(buttonGenerarArchivo),
												@widgetVar(buttonGuardarPlantilla)" />
								</p:selectOneMenu>
							</h:column>
							<h:column>
							</h:column>
						</h:panelGrid>
						<p:contextMenu for="tableTemplate">
							<p:menuitem value="Añadir FA" icon="ui-icon-plus"
								oncomplete="PF('FADialog').show();" />
							<p:menuitem value="Eliminar " icon="ui-icon-close"
								actionListener="#{cpMB.eliminarFila()}"
								update="@widgetVar(tableTemplate),
												@widgetVar(buttonGenerarArchivo),
												@widgetVar(buttonGuardarPlantilla)" />
						</p:contextMenu>
						<p:dataTable id="tableTemplate" var="row"							
							selection="#{cpMB.selectedRow}" rowKey="#{row.id}"
							selectionMode="single" value="#{cpMB.rows}" draggableRows="true"
							widgetVar="tableTemplate"							
							emptyMessage="No hay campos por configurar!">							
							<p:ajax event="rowReorder" />
							<f:facet name="header">
								Configuración de plantilla
		 					</f:facet>
							<p:column headerText="Etiqueta">
								<p:outputLabel value="#{row.item}" />
							</p:column>
							<p:column headerText="Nombre">
								<p:outputLabel value="#{row.nombre}" />
							</p:column>
							<p:column headerText="Tamaño">
								<p:inputText value="#{row.tamanio}" />
							</p:column>
							<p:column headerText="Tipo">
								<p:selectOneMenu value="#{row.tipo}">
									<f:selectItem itemLabel="Alfanumerico" itemValue="0" />
									<f:selectItem itemLabel="Numerico" itemValue="1" />
								</p:selectOneMenu>
							</p:column>
							<p:column headerText="Cifrado">
								<p:selectOneMenu value="#{row.cifrado}">
									<f:selectItem itemLabel="Si" itemValue="true" />
									<f:selectItem itemLabel="No" itemValue="false" />
								</p:selectOneMenu>
							</p:column>
							<p:column headerText="Transformado" >
								<p:panelGrid columns="2">							
									<p:selectOneMenu 		id="oneMenuTransf"																																												
															value="#{row.transformado.transformado}"													  		
													  		onchange="openDialogVT(this);">										
										<p:ajax 			event="change"								
															update="buttonT" />											
	                						<f:selectItem 	itemValue="true" 	itemLabel="Si"/>
	                						<f:selectItem 	itemValue="false" 	itemLabel="No"/>
									</p:selectOneMenu>
								
									<p:commandButton		disabled="#{!row.transformado.transformado}"
															action="#{cpMB.actionButtonViewVT(row)}"
															id="buttonT" 
															icon="ui-icon-search"
															update="@widgetVar(verCT)"
															oncomplete="PF('verCT').show();">										
									</p:commandButton>									
								</p:panelGrid>
								<p:remoteCommand			id="remote"															
															name="func"	
															action="#{cpMB.actionOneMenuVT(row)}">									
								</p:remoteCommand>																													
							</p:column>
						</p:dataTable>
						<br />
						<p:commandButton widgetVar="buttonGenerarArchivo"
							value="Generar Archivo" disabled="#{cpMB.rows.size()==0}" />
						<p:commandButton widgetVar="buttonGuardarPlantilla"
							value="Guardar Plantilla" disabled="#{cpMB.rows.size()==0}" />
					</p:panel>
				</div>
			</p:tab>
		</p:accordionPanel>
	</h:form>
	<p:dialog widgetVar="dialogSQL" modal="true"	dynamic="true"
			header="Ingrese Consulta SQL ..." closable="true" >
		<p:ajax event="close" update="@widgetVar(panelmenu2)" />
			<p:outputPanel>
				<h:form>
					<p:messages id="msgSQL" showDetail="true" closable="true" />
					<br />
					<p:inputTextarea placeholder="Ingrese consulta SQL"
						value="#{cpMB.query}">
						<p:ajax event="keyup" listener="#{cpMB.validarConsultaSQL(1)}"
							update="msgSQL,continuar" />
					</p:inputTextarea>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
					<br />
					<p:commandButton id="continuar" value="Continuar"
						actionListener="#{cpMB.listenerButtonContinuar()}"
						disabled="#{cpMB.form2.deshabilitado}" 
						onclick="PF('dialogSQL').hide();PF('acordeonCrearPlantilla').select(1);"
						update="@widgetVar(panelmenu2)">
					</p:commandButton>
				</h:form>
			</p:outputPanel>
		</p:dialog>
		<p:dialog header="Añadir Funcion Adicional" widgetVar="FADialog"
				modal="true" showEffect="fade" hideEffect="fade">
			<p:ajax event="close" update="@widgetVar(tableTemplate)" />
				<p:outputPanel>
					<h:form>
						<p:messages id="msgSQLGroup" showDetail="true" closable="true" />
						<br />
						<p:inputTextarea	placeholder="Ingrese consulta GROUP BY"
											value="#{cpMB.query}">
							<p:ajax event="keyup"	listener="#{cpMB.validarConsultaSQL(2)}"
									update="msgSQLGroup,continuarGroup"/>
						</p:inputTextarea>
						<br />
						<p:commandButton	id="continuarGroup"	value="Continuar"
							actionListener="#{cpMB.agregarFA()}"
							disabled="#{cpMB.fa.deshabilitado}"
							oncomplete="PF('FADialog').hide();"
							update="@widgetVar(tableTemplate)"/>
					</h:form>
				</p:outputPanel>
			</p:dialog>		
		<p:dialog header="Configuración Transformado" widgetVar="CTDialog"	dynamic="true"
				modal="true" showEffect="fade" hideEffect="fade">				
				<h:form>
				<p:outputPanel	id="panelCT">
						<p:messages id="msgVT" closable="true" />
						<p:panelGrid columns="2">	
									<h:outputLabel 		value="Caracter: " />							
									<p:inputText 		placeholder="Caracter ..."														
														value="#{cpMB.rowsel.transformado.caracter}">
										<p:ajax 		event="keyup"
														listener="#{cpMB.listenerCaracterValido()}"
														update="msgVT,continuarCT"/>
									</p:inputText>						
									
									<h:outputLabel		value="Posición: " />
									<p:selectOneMenu	id="onemenu"
														value="#{cpMB.rowsel.transformado.posicion}">
										<f:selectItem 	itemLabel="Izquierda"	itemValue="0"/>
										<f:selectItem	itemLabel="Derecha"		itemValue="1" />
									</p:selectOneMenu>
							</p:panelGrid>
									<p:commandButton	id="continuarCT"														
														value="Continuar"
														update="@widgetVar(oneMenuTransf)"
														action="#{cpMB.actionButtonSaveVT()}"													
														disabled="#{cpMB.rowsel.transformado.deshabilitado}"																												
														oncomplete="PF('CTDialog').hide();">
										<p:resetInput target="panelCT"/>
									</p:commandButton>
				</p:outputPanel>
				</h:form>				
			</p:dialog>
			<p:dialog	header="Ver Configuracion Transformado" widgetVar="verCT"	dynamic="true"
				modal="true" showEffect="fade" hideEffect="fade">
							<p:outputPanel>
								<p:panelGrid columns="2">
									<h:outputLabel 	value="Caracter" />
									<p:inputText 	value="#{cpMB.rowsel.transformado.caracter}"
													readonly="true"/>
									
									<h:outputLabel 	value="Posicion" />
									<p:inputText 	value="#{cpMB.rowsel.transformado.posicion}"
													readonly="true"/>
								</p:panelGrid>
							</p:outputPanel>			
						</p:dialog>															
	<div class="alwaysBottom"></div>
</h:body>
</html>
